<template name="home">
  <div style="align:center;">
    <span class="home-page-title">Home</span>
  </div>

  <ul class="nav nav-tabs">
    <li class="active"><a data-toggle="tab" href="#gamelistTab">Game List</a></li>
    <li><a data-toggle="tab" href="#createGameTab">Create Game</a></li>
    <li><a data-toggle="tab" href="#waitingRoomTab">Waiting Room</a></li>
  </ul>

  <div class="tab-content">
    <br/>
    
    <div id="gamelistTab" class="tab-pane fade in  active">
      <ul class="list-group">
        {{#each games}}
          {{> home_game}}
        {{/each}}
      </ul>
    </div>
  

    <div id="createGameTab" class="tab-pane fade">
      {{> game_create_form}}
      <br />
      {{#if currentUser}}
        <button id="createGame" type="submit" class="btn btn-primary btn-md">Create Game</button>
      {{else}}
        Log in to create a game.
      {{/if}}
    </div>

    <div id="waitingRoomTab" class="tab-pane fade">
      {{#if currentUser}}
      <!--<button id="createWait" type="submit" class="btn btn-md">List in Waiting Room</button>-->
      {{> list_of_wait_games}}
      {{else}}
        Log in to create a game.
      {{/if}}
    </div>
  </div>
</template>

<template name="home_game">
  <a href="/game/{{_id}}" class="list-group-item">
    <div class="list-item">
      <table style="width:100%;table-layout:fixed;">
        <tbody>
          <tr>
            <td>
              <span class="game-title">{{name}}</span>
              {{#with gameState _id}}
                <span class="label {{label_style}}">{{state}}</span>
              {{/with}}
              <span class="badge">{{turn_number}}</span>
            </td>
            <td rowspan="2" width="60px" align="center">
            
            </td>
            <td rowspan="2" width="20px" align="center">
              <a href="#" class="deleteGame">
                <span class="glyphicon glyphicon-remove"></span>
              </a>
            </td>
          </tr>
          <tr>
            <td>
              <span class="game-players">{{creator.name}} vs. {{challenger.name}}</span>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </a>
</template>

<template name="game_create_form">
  <div class="form-group">
    <label for="name-input">Name</label>
    <input class="form-control" id="name-input" type="text">
  </div>

  <div id="select-opp-div">
    <label>Opponents</label>
    {{#each aiPlayers}}
      <div class="radio">
        <label><input type="radio" name="opp-radio" value="{{name}}">{{full_name}}</label>
      </div>
    {{/each}}
    <div class="radio">
      <label><input type="radio" name="opp-radio" value="waiting">Post to Waiting Room</label>
    </div>
    <div class="radio">
      <label><input type="radio" name="opp-radio" value="friend">Friend</label>
    </div>
  </div>
  <br />
  {{#if isOpponentAi}}
    {{#with selectedAi}}
      <p><h3>{{full_name}}</h3></p>
      <p><span><strong>Difficulty: </strong>{{difficulty_name}}</span></p>
      <p><span><strong>Description: </strong>{{description}}</span></p>
    {{/with}}
  {{/if}}
  {{#if isOpponentFriend}}
    <div class="form-group">
      <label for="friend-input">Friend Account</label>
      <input class="form-control" id="friend-input" type="text">
    </div>
  {{/if}}
</template>

<template name="list_of_wait_games">
  <div class="list-item" id="wait-list-game">
  {{#each games}}
    <a href="#" class="list-group-item joinGame">
      <table style="width:100%;table-layout:fixed;">
        <tbody>
          <tr>
            <td>
              <span class="game-title">{{name}}</span>
              <span class="label label-warning">waiting</span>
            </td>
          </tr>
          <tr><td><span class="game-players">By {{creator.name}}</span></td></tr>
        </tbody>
      </table>
    </a>
  {{/each}}
  </div>
</template>